<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="5031px" height="1751px" viewBox="-0.5 -0.5 5031 1751" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-05-05T07:46:07.790Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36&quot; etag=&quot;i5RJDbR36CuLfXG5d8FI&quot; version=&quot;14.6.9&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;C5RBs43oDa-KdzZeNtuy&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://app.diagrams.net/?libs=general;flowchart#HBasenode%2FdrawPic%2Fmain%2Fdubbo%E6%9C%8D%E5%8A%A1%E5%AF%BC%E5%87%BA.svg"><defs/><g><path d="M 940 90 L 940 163.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 168.88 L 936.5 161.88 L 940 163.63 L 943.5 161.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="720" y="30" width="440" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 60px; margin-left: 721px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">1. 把applicationContext添加到SpringExtensionFactory中去，因为服务可能是通过spring暴露的<br />2. afterPropertiesSet----赋值配置类属性，如果不存在就从spring容器中找<br />3. 监听spring启动完成事件，经服务导出---export</div></div></div></foreignObject><text x="940" y="64" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">1. 把applicationContext添加到SpringExtensionFactory中去，因为服务可能是通过spring暴露的...</text></switch></g><rect x="670" y="0" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 10px; margin-left: 671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ServiceBean</div></div></div></foreignObject><text x="690" y="14" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Servic...</text></switch></g><path d="M 940 230 L 940 263.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 268.88 L 936.5 261.88 L 940 263.63 L 943.5 261.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="760" y="170" width="360" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 358px; height: 1px; padding-top: 200px; margin-left: 761px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">分别获取provider、module、application的配置信息，会进行覆盖，这些信息主要是在启动时解析propertyties文件获取<br />ServiceConfig中的某些属性如果是空的，那么就从ProviderConfig、ModuleConfig、ApplicationConfig中获取</div></div></div></foreignObject><text x="940" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">分别获取provider、module、application的配置信息，会进行覆盖，这些信息主要是在启动时解析propertyties文件获取...</text></switch></g><rect x="890" y="100" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 110px; margin-left: 915px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">export</div></div></div></foreignObject><text x="915" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">export</text></switch></g><rect x="765" y="140" width="170" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 150px; margin-left: 850px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">checkAndUpdateSubConfigs</div></div></div></foreignObject><text x="850" y="154" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">checkAndUpdateSubConfigs</text></switch></g><path d="M 1140 170 L 1190 170 L 1220 200 L 1220 230 L 1140 230 L 1140 170 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1190 170 L 1190 200 L 1220 200 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 1190 170 L 1190 200 L 1220 200" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 200px; margin-left: 1141px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">properties文件获取属性值</div></div></div></foreignObject><text x="1180" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">properties文件获取属性值</text></switch></g><path d="M 740 160 L 735 160 Q 730 160 730 170 L 730 190 Q 730 200 725 200 L 722.5 200 Q 720 200 725 200 L 727.5 200 Q 730 200 730 210 L 730 230 Q 730 240 735 240 L 740 240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="550" y="180" width="160" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 190px; margin-left: 630px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">completeCompoundConfigs</div></div></div></foreignObject><text x="630" y="194" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">completeCompoundConfigs</text></switch></g><path d="M 940 350 L 940 383.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 388.88 L 936.5 381.88 L 940 383.63 L 943.5 381.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 885 310 L 760 310 L 760 795 L 783.63 795" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 788.88 795 L 781.88 798.5 L 783.63 795 L 781.88 791.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 940 270 L 995 310 L 940 350 L 885 310 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 310px; margin-left: 886px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果配置了ConfigCenter：</div></div></div></foreignObject><text x="940" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果配置了ConfigCenter：</text></switch></g><path d="M 940 490 L 940 523.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 528.88 L 936.5 521.88 L 940 523.63 L 943.5 521.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="795" y="390" width="290" height="100" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 288px; height: 1px; padding-top: 440px; margin-left: 796px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">一个XxConfig对象的属性可能是有值的，也可能是没有值的，这时需要从其他位置获取属性值,来进行属性的覆盖<br />覆盖的优先级，从大到小为系统变量-&gt;配置中心应用配置-&gt;配置中心全局配置-&gt;注解或xml中定义-&gt;dubbo.properties文件</div></div></div></foreignObject><text x="940" y="444" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">一个XxConfig对象的属性可能是有值的，也可能是没有值的，这时需要从其他位置获取属性值,来进行属性的覆盖...</text></switch></g><path d="M 1110 325 L 1540 325 L 1570 355 L 1570 525 L 1110 525 L 1110 325 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1540 325 L 1540 355 L 1570 355 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 1540 325 L 1540 355 L 1570 355" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 458px; height: 1px; padding-top: 425px; margin-left: 1111px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>// JVM环境变量</div><div>        compositeConfiguration.addConfiguration(this.getSystemConfig(prefix, id));</div><div>        // 操作系统环境变量</div><div>        compositeConfiguration.addConfiguration(this.getEnvironmentConfig(prefix, id));</div><div><br /></div><div>        // 配置中心APP配置</div><div>        compositeConfiguration.addConfiguration(this.getAppExternalConfig(prefix, id));</div><div><br /></div><div>        // 配置中心Global配置</div><div>        compositeConfiguration.addConfiguration(this.getExternalConfig(prefix, id));</div><div><br /></div><div>        // dubbo.properties中的配置</div><div>        compositeConfiguration.addConfiguration(this.getPropertiesConfig(prefix, id));</div></div></div></div></foreignObject><text x="1340" y="429" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// JVM环境变量...</text></switch></g><path d="M 940 590 L 940 633.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 638.88 L 936.5 631.88 L 940 633.63 L 943.5 631.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="780" y="530" width="320" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 560px; margin-left: 781px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">将当前ServiceConfig上的set方法所对应的属性更新为优先级最高的值<br />利用反射设置属性值</div></div></div></foreignObject><text x="940" y="564" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将当前ServiceConfig上的set方法所对应的属性更新为优先级最高的值...</text></switch></g><path d="M 700 280 L 695 280 Q 690 280 690 290 L 690 535 Q 690 545 685 545 L 682.5 545 Q 680 545 685 545 L 687.5 545 Q 690 545 690 555 L 690 800 Q 690 810 695 810 L 700 810" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 940 700 L 940 743.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 748.88 L 936.5 741.88 L 940 743.63 L 943.5 741.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="770" y="640" width="340" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 670px; margin-left: 771px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">属性更新后，从远程配置中心获取数据(应用配置，全局配置)<br />1. ConfigCenterConfig获取配置中心地址<br />2. 读取数据，解析内容：如果是zookeeper，获取的就是/dubbo/config/dubbo/dubbo.properties节点中的内容</div></div></div></foreignObject><text x="940" y="674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">属性更新后，从远程配置中心获取数据(应用配置，全局配置)...</text></switch></g><path d="M 940 810 L 940 853.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 858.88 L 936.5 851.88 L 940 853.63 L 943.5 851.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="790" y="750" width="300" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 780px; margin-left: 791px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">从配置中心取到配置数据后，刷新所有的XxConfig中的属性，除开ServiceConfig。</div></div></div></foreignObject><text x="940" y="784" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">从配置中心取到配置数据后，刷新所有的XxConfig中的属性，除开ServiceConfig。</text></switch></g><path d="M 1130 710 L 1470 710 L 1500 740 L 1500 830 L 1130 830 L 1130 710 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1470 710 L 1470 740 L 1500 740 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 1470 710 L 1470 740 L 1500 740" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 368px; height: 1px; padding-top: 770px; margin-left: 1131px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>getApplication().ifPresent(ApplicationConfig::refresh);</div><div>        getMonitor().ifPresent(MonitorConfig::refresh);</div><div>        getModule().ifPresent(ModuleConfig::refresh);</div><div><br /></div><div>        getProtocols().values().forEach(ProtocolConfig::refresh);</div><div>        getRegistries().values().forEach(RegistryConfig::refresh);</div><div>        getProviders().values().forEach(ProviderConfig::refresh);</div><div>        getConsumers().values().forEach(ConsumerConfig::refresh);</div></div></div></div></foreignObject><text x="1315" y="774" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">getApplication().ifPresent(ApplicationConfig::refresh);...</text></switch></g><rect x="795" y="280" width="30" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 290px; margin-left: 810px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">否</div></div></div></foreignObject><text x="810" y="294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">否</text></switch></g><rect x="0" y="590" width="670" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 615px; margin-left: 335px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>// 从配置中心获取配置，包括应用配置和全局配置</div><div>        // 把获取到的配置放入到Environment中的externalConfigurationMap和appExternalConfigurationMap中</div><div>        // 并刷新所有的XxConfig的属性（除开ServiceConfig），刷新的意思就是将配置中心的配置覆盖调用XxConfig中的属性</div></div></div></div></foreignObject><text x="335" y="619" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// 从配置中心获取配置，包括应用配置和全局配置...</text></switch></g><rect x="550" y="535" width="110" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 545px; margin-left: 605px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">startConfigCenter</div></div></div></foreignObject><text x="605" y="549" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">startConfigCenter</text></switch></g><path d="M 940 940 L 940 983.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 988.88 L 936.5 981.88 L 940 983.63 L 943.5 981.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="785" y="860" width="310" height="80" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 900px; margin-left: 786px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果provider配置了协议就采用这个协议，否则就从配置中心的全局配置、应用配置获取dubbo.protocols.的配置项值。如果配置中心没有配置协议，就取默认的协议，如果配置了把从配置中心配置的协议添加到服务的协议列表中去</div></div></div></foreignObject><text x="940" y="904" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果provider配置了协议就采用这个协议，否则就从配置中心的全局配置、应用配置获取dubbo.protocols.的配置项值。如果配置中心没有配置协议，就取默认的协议，如果配置了把从配置中心配置的协议添加到服务的协议列表中去</text></switch></g><path d="M 1150 860 L 1300 860 L 1330 890 L 1330 940 L 1150 940 L 1150 860 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1300 860 L 1300 890 L 1330 890 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 1300 860 L 1300 890 L 1330 890" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 900px; margin-left: 1151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>checkDefault();</div><div>        checkProtocol();</div><div>        checkApplication();</div><div>总体思路就是不存在就创建</div></div></div></div></foreignObject><text x="1240" y="904" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">checkDefault();...</text></switch></g><path d="M 940 1050 L 940 1083.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 1088.88 L 936.5 1081.88 L 940 1083.63 L 943.5 1081.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="790" y="990" width="300" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1020px; margin-left: 791px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果protocol不是只有injvm协议，表示服务调用不是只在本机jvm里面调用，那就需要用到注册中心（检查registry config是否存在，转换为RegistryConfig）<br />这个协议是由scope属性控制</div></div></div></foreignObject><text x="940" y="1024" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果protocol不是只有injvm协议，表示服务调用不是只在本机jvm里面调用，那就需要用到注册中心（检查registry config是否存在，转换为RegistryConfig）...</text></switch></g><path d="M 940 1150 L 940 1170 L 940 1160 L 940 1173.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 1178.88 L 936.5 1171.88 L 940 1173.63 L 943.5 1171.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="880" y="1090" width="120" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1120px; margin-left: 881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">刷新ServiceConfig</div></div></div></foreignObject><text x="940" y="1124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">刷新ServiceConfig</text></switch></g><path d="M 940 1240 L 940 1283.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 1288.88 L 936.5 1281.88 L 940 1283.63 L 943.5 1281.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="780" y="1180" width="320" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 1210px; margin-left: 781px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果配了metadataReportConfig，那么就刷新配置</div></div></div></foreignObject><text x="940" y="1214" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果配了metadataReportConfig，那么就刷新配置</text></switch></g><path d="M 940 1390 L 940 1423.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 1428.88 L 936.5 1421.88 L 940 1423.63 L 943.5 1421.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="800" y="1290" width="280" height="100" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 1340px; margin-left: 801px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果当前服务对应的实现类是一个GenericService，表示没有特定的接口<br />否则加载接口，刷新MethodConfig，并判断MethodConfig中对应的方法在接口中是否存在，并判断实现类是不是该接口类型--ref</div></div></div></foreignObject><text x="940" y="1344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果当前服务对应的实现类是一个GenericService，表示没有特定的接口...</text></switch></g><path d="M 940 1490 L 940 1523.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 1528.88 L 936.5 1521.88 L 940 1523.63 L 943.5 1521.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="880" y="1430" width="120" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1460px; margin-left: 881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果有本地存根就设置</div></div></div></foreignObject><text x="940" y="1464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果有本地存根就设置</text></switch></g><path d="M 940 1570 L 940 1603.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 940 1608.88 L 936.5 1601.88 L 940 1603.63 L 943.5 1601.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="880" y="1530" width="120" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1550px; margin-left: 881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">检查local和stub</div></div></div></foreignObject><text x="940" y="1554" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">检查local和stub</text></switch></g><path d="M 1000 1630 L 1093.63 1630" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1098.88 1630 L 1091.88 1633.5 L 1093.63 1630 L 1091.88 1626.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="880" y="1610" width="120" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1630px; margin-left: 881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">checkMock</div></div></div></foreignObject><text x="940" y="1634" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">checkMock</text></switch></g><path d="M 1220 1630 L 1293.63 1630" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1298.88 1630 L 1291.88 1633.5 L 1293.63 1630 L 1291.88 1626.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1100" y="1600" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1630px; margin-left: 1101px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">判断服务是否需要被导出</div></div></div></foreignObject><text x="1160" y="1634" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">判断服务是否需要被导出</text></switch></g><path d="M 1420 1630 L 1613.63 1630" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1618.88 1630 L 1611.88 1633.5 L 1613.63 1630 L 1611.88 1626.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1300" y="1600" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1630px; margin-left: 1301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">是否需要延迟发布<br />（就是通过一个定时器任务触发doExport）</div></div></div></foreignObject><text x="1360" y="1634" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">是否需要延迟发布&#xa;（就是通过一个定时器任务触发doExport）</text></switch></g><path d="M 1730 1565 L 1730 1496.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1730 1491.12 L 1733.5 1498.12 L 1730 1496.37 L 1726.5 1498.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1620" y="1565" width="220" height="130" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1630px; margin-left: 1621px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">生成服务的List&lt;URL&gt; registryURLs，注册中心列表<br />如果是服务提供者，获取register的值，如果为false，表示该服务不注册到注册中心<br />如果是服务消费者，获取subscribe的值，如果为false，表示该引入的服务不订阅注册中心中的数据</div></div></div></foreignObject><text x="1730" y="1634" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">生成服务的List&lt;URL&gt; registryURLs，注册中心列表...</text></switch></g><rect x="1540" y="1640" width="60" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1650px; margin-left: 1570px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">doExport</div></div></div></foreignObject><text x="1570" y="1654" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">doExport</text></switch></g><path d="M 1910 1560 L 2310 1560 L 2340 1590 L 2340 1660 L 1910 1660 L 1910 1560 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2310 1560 L 2310 1590 L 2340 1590 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2310 1560 L 2310 1590 L 2340 1590" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 428px; height: 1px; padding-top: 1610px; margin-left: 1911px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">大致内容：registry://127.0.0.1:2181/org.apache.dubbo.registry.RegistryService?application=dubbo-demo-annotation-provider&amp;dubbo=2.0.2&amp;pid=269936&amp;registry=zookeeper&amp;timestamp=1584886077813</div></div></div></foreignObject><text x="2125" y="1614" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">大致内容：registry://127.0.0.1:2181/org.apache.dubbo.registry.RegistryService?app...</text></switch></g><rect x="1840" y="1675" width="90" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1685px; margin-left: 1885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">loadRegistries</div></div></div></foreignObject><text x="1885" y="1689" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">loadRegistries</text></switch></g><path d="M 1730 1430 L 1730 1366.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1730 1361.12 L 1733.5 1368.12 L 1730 1366.37 L 1726.5 1368.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1615" y="1430" width="230" height="60" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1460px; margin-left: 1616px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">遍历服务的注册中心列表，构建缓存<br />PROVIDED_SERVICES: <br />Map&lt;key,ProviderModel&gt;</div></div></div></foreignObject><text x="1730" y="1464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">遍历服务的注册中心列表，构建缓存PROVIDED_SERVICES:...</text></switch></g><path d="M 1910 1430 L 2140 1430 L 2170 1460 L 2170 1510 L 1910 1510 L 1910 1430 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2140 1430 L 2140 1460 L 2170 1460 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2140 1430 L 2140 1460 L 2170 1460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1470px; margin-left: 1911px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">pathKey = group/contextpath/path:version<br />ProviderModel中存在服务提供者访问路径，实现类，接口，以及接口中的各个方法对应的ProviderMethodModel,其本质就是表示一种服务</div></div></div></foreignObject><text x="2040" y="1474" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">pathKey = group/contextpath/path:version...</text></switch></g><path d="M 1730 1300 L 1730 1236.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1730 1231.12 L 1733.5 1238.12 L 1730 1236.37 L 1726.5 1238.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1610" y="1300" width="240" height="60" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 1330px; margin-left: 1611px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">将参数存到map中<br />metrics、application、module、provider、protocolConfig、ServiceConfig、方法中的配置</div></div></div></foreignObject><text x="1730" y="1334" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将参数存到map中...</text></switch></g><path d="M 1900 1280 L 2560 1280 L 2590 1310 L 2590 1370 L 1900 1370 L 1900 1280 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2560 1280 L 2560 1310 L 2590 1310 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2560 1280 L 2560 1310 L 2590 1310" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 688px; height: 1px; padding-top: 1325px; margin-left: 1901px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">某个方法的配置参数，注意有prefix：xx.retry=false，xx表示方法名<br /><div>// 如果配置了type，则遍历当前接口的所有方法，然后找到方法名和当前方法名相等的方法，可能存在多个</div><div>                        // 如果配置了index,则看index对应位置的参数类型是否等于type,如果相等，则向map中存入argument对象中的参数</div><div>                        // 如果没有配置index，那么则遍历方法所有的参数类型，等于type则向map中存入argument对象中的参数</div><div>                        // 如果没有配置type,但配置了index,则把对应位置的argument放入map</div></div></div></div></foreignObject><text x="2245" y="1329" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">某个方法的配置参数，注意有prefix：xx.retry=false，xx表示方法名...</text></switch></g><path d="M 1730 1170 L 1730 1136.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1730 1131.12 L 1733.5 1138.12 L 1730 1136.37 L 1726.5 1138.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1600" y="1170" width="260" height="60" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1200px; margin-left: 1601px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">METHODS_KEY，方法名用，连接的字符串，放到map</div></div></div></foreignObject><text x="1730" y="1204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">METHODS_KEY，方法名用，连接的字符串，放到map</text></switch></g><path d="M 1730 1070 L 1730 1036.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1730 1031.12 L 1733.5 1038.12 L 1730 1036.37 L 1726.5 1038.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1670" y="1070" width="120" height="60" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1100px; margin-left: 1671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">设置token</div></div></div></foreignObject><text x="1730" y="1104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">设置token</text></switch></g><path d="M 1890 1070 L 2260 1070 L 2290 1100 L 2290 1130 L 1890 1130 L 1890 1070 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2260 1070 L 2260 1100 L 2290 1100 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2260 1070 L 2260 1100 L 2290 1100" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 1100px; margin-left: 1891px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Token是为了防止服务被消费者直接调用（伪造http请求）<br />只有从注册中心拿到URL才能调用成功<br />TokenFilter</div></div></div></foreignObject><text x="2090" y="1104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Token是为了防止服务被消费者直接调用（伪造http请求）...</text></switch></g><path d="M 1730 970 L 1730 936.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1730 931.12 L 1733.5 938.12 L 1730 936.37 L 1726.5 938.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1670" y="970" width="120" height="60" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1000px; margin-left: 1671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">生成URL</div></div></div></foreignObject><text x="1730" y="1004" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">生成URL</text></switch></g><path d="M 1880 950 L 2300 950 L 2330 980 L 2330 1050 L 1880 1050 L 1880 950 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2300 950 L 2300 980 L 2330 980 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2300 950 L 2300 980 L 2330 980" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 448px; height: 1px; padding-top: 1000px; margin-left: 1881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>        // url：http://192.168.40.17:80/org.apache.dubbo.demo.DemoService?</div><div>anyhost=true&amp;application=dubbo-demo-annotation-provider&amp;bean.name=ServiceBean:org.apache.dubbo.demo.DemoService&amp;bind.ip=192.168.40.17</div><div>&amp;bind.port=80&amp;deprecated=false&amp;dubbo=2.0.2&amp;dynamic=true&amp;generic=false&amp;</div><div>interface=org.apache.dubbo.demo.DemoService&amp;methods=sayHello&amp;pid=285072&amp;release=&amp;</div><div>side=provider&amp;timestamp=1585206500409</div><div><br /></div></div></div></div></foreignObject><text x="2105" y="1004" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// url：http://192.168.40.17:80/org.apache.dubbo.demo.DemoService?...</text></switch></g><path d="M 1730 870 L 1730 840 L 1725 840 L 1725 816.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1725 811.12 L 1728.5 818.12 L 1725 816.37 L 1721.5 818.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1620" y="870" width="220" height="60" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 900px; margin-left: 1621px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">可以通过ConfiguratorFactory，对服务url再次进行配置<br />SPI机制调用</div></div></div></foreignObject><text x="1730" y="904" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">可以通过ConfiguratorFactory，对服务url再次进行配置...</text></switch></g><path d="M 1725 720 L 1725 656.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1725 651.12 L 1728.5 658.12 L 1725 656.37 L 1721.5 658.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1600" y="720" width="250" height="90" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 765px; margin-left: 1601px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">处理scope：<br />1. 如果scope为none,则不会进行任何的服务导出，既不会远程，也不会本地<br />2. 如果scope不是remote,则会进行本地导出，会把当前url的protocol改为injvm，然后进行导出</div></div></div></foreignObject><text x="1725" y="769" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">处理scope：...</text></switch></g><path d="M 1890 730 L 2080 730 L 2110 760 L 2110 830 L 1890 830 L 1890 730 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2080 730 L 2080 760 L 2110 760 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2080 730 L 2080 760 L 2110 760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 780px; margin-left: 1891px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">scope可能为null，remote, local,none</div></div></div></foreignObject><text x="2000" y="784" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">scope可能为null，remote, local,none</text></switch></g><path d="M 1725 400 L 1725 346.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1725 341.12 L 1728.5 348.12 L 1725 346.37 L 1721.5 348.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1590" y="400" width="270" height="250" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 525px; margin-left: 1591px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果scope不是local,则会进行远程导出：<br />遍历注册中心，如果有注册中心，则将服务注册到注册中心<br />1. 如果是injvm，则不需要进行注册中心注册<br />2. 该服务是否是动态，对应zookeeper上表示是否是临时节点，对应dubbo中的功能就是静态服务<br />3.拿到监控中心地址，当前服务连接哪个监控中心，服务的register参数，如果为true，则表示要注册到注册中心<br />4. 服务使用的动态代理机制，如果为空则使用javassit<br />5.生成一个当前服务接口的代理对象：invoker，封装成DelegateProviderMetaDataInvoker，表示服务提供者，包括了Invoker和服务的配置<br />6.使用特定的协议来对服务进行导出，这里的协议为RegistryProtocol，导出成功后得到一个Exporter</div></div></div></foreignObject><text x="1725" y="529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果scope不是local,则会进行远程导出：...</text></switch></g><path d="M 1920 490 L 2200 490 L 2230 520 L 2230 590 L 1920 590 L 1920 490 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2200 490 L 2200 520 L 2230 520 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2200 490 L 2200 520 L 2230 520" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 540px; margin-left: 1921px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">使用代理生成一个Invoker，Invoker表示服务提供者的代理，可以使用Invoker的invoke方法执行服务<br />这个Invoker中包括了服务的实现者、服务接口类、服务的注册地址（针对当前服务的，参数export指定了当前服务）</div></div></div></foreignObject><text x="2075" y="544" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">使用代理生成一个Invoker，Invoker表示服务提供者的代理，可以使用Invoker的invoke方法执行服务...</text></switch></g><rect x="1665" y="280" width="120" height="60" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 310px; margin-left: 1666px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据服务url，讲服务的元信息存入元数据中心</div></div></div></foreignObject><text x="1725" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据服务url，讲服务的元信息存入元数据中心</text></switch></g><rect x="2680" y="450" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 460px; margin-left: 2730px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">服务导出export</div></div></div></foreignObject><text x="2730" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">服务导出export</text></switch></g><path d="M 2800 420 L 2970 420 L 3000 450 L 3000 480 L 2800 480 L 2800 420 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2970 420 L 2970 450 L 3000 450 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 2970 420 L 2970 450 L 3000 450" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 450px; margin-left: 2801px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">registry://   ---&gt; RegistryProtocol<br />dubbo://      ---&gt; DubboProtocol</div></div></div></foreignObject><text x="2900" y="454" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">registry://   ---&gt; RegistryProtoc...</text></switch></g><path d="M 2760 570 L 2760 603.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 608.88 L 2756.5 601.88 L 2760 603.63 L 2763.5 601.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2700" y="510" width="120" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 540px; margin-left: 2701px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RegistryProtocol</div></div></div></foreignObject><text x="2760" y="544" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">RegistryProtocol</text></switch></g><path d="M 2760 670 L 2760 703.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 708.88 L 2756.5 701.88 L 2760 703.63 L 2763.5 701.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2630" y="610" width="260" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 640px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">获取providerUrl与registryUrl，<br />目的是为了将providerUrl存进registryUrl</div></div></div></foreignObject><text x="2760" y="644" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">获取providerUrl与registryUrl，...</text></switch></g><path d="M 2760 770 L 2760 823.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 828.88 L 2756.5 821.88 L 2760 823.63 L 2763.5 821.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2630" y="710" width="260" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 740px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">在服务提供者url的基础上，生成一个overrideSubscribeUrl，协议为provider://，增加参数category=configurators&amp;check=false</div></div></div></foreignObject><text x="2760" y="744" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在服务提供者url的基础上，生成一个overrideSubscribeUrl，协议为provider://，增加参数category=...</text></switch></g><path d="M 2960 710 L 3260 710 L 3290 740 L 3290 780 L 2960 780 L 2960 710 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3260 710 L 3260 740 L 3290 740 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 3260 710 L 3260 740 L 3290 740" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 328px; height: 1px; padding-top: 745px; margin-left: 2961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">overrideSubscribeUrl是老版本的动态配置监听url，表示了需要监听的服务以及监听的类型（configurators， 这是老版本上的动态配置）</div></div></div></foreignObject><text x="3125" y="749" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">overrideSubscribeUrl是老版本的动态配置监听url，表示了需要监听的服务以及监听的类型（configurators， 这是老版本上的动态配置）</text></switch></g><path d="M 2760 910 L 2760 943.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 948.88 L 2756.5 941.88 L 2760 943.63 L 2763.5 941.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2630" y="830" width="260" height="80" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 870px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">一个overrideSubscribeUrl对应一个OverrideListener，用来监听变化事件，监听到overrideSubscribeUrl的变化后，OverrideListener就会根据变化进行相应处理，具体处理逻辑看OverrideListener的实现</div></div></div></foreignObject><text x="2760" y="874" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">一个overrideSubscribeUrl对应一个OverrideListener，用来监听变化事件，监听到overrid...</text></switch></g><path d="M 2760 1080 L 2760 1133.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 1138.88 L 2756.5 1131.88 L 2760 1133.63 L 2763.5 1131.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2630" y="950" width="260" height="130" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1015px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">在这个方法里会利用providerConfigurationListener和serviceConfigurationListener去重写providerUrl<br />providerConfigurationListener表示应用级别的动态配置监听器，providerConfigurationListener是RegistyProtocol的一个属性<br />serviceConfigurationListener表示服务级别的动态配置监听器，serviceConfigurationListener是在每暴露一个服务时就会生成一个</div></div></div></foreignObject><text x="2760" y="1019" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在这个方法里会利用providerConfigurationListener和serviceConfigu...</text></switch></g><path d="M 2960 965 L 3500 965 L 3530 995 L 3530 1065 L 2960 1065 L 2960 965 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3500 965 L 3500 995 L 3530 995 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 3500 965 L 3500 995 L 3530 995" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 568px; height: 1px; padding-top: 1015px; margin-left: 2961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">这两个监听器都是新版本中的监听器<br /><div>// 新版本监听的zk路径是：</div><div>        // 服务： /dubbo/config/dubbo/org.apache.dubbo.demo.DemoService.configurators节点的内容</div><div>        // 应用： /dubbo/config/dubbo/dubbo-demo-provider-application.configurators节点的内容</div><div>        // 注意，要喝配置中心的路径区分开来，配置中心的路径是：</div><div>        // 应用：/dubbo/config/dubbo/org.apache.dubbo.demo.DemoService/dubbo.properties节点的内容</div><div>        // 全局：/dubbo/config/dubbo/dubbo.properties节点的内容</div></div></div></div></foreignObject><text x="3245" y="1019" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">这两个监听器都是新版本中的监听器// 新版本监听的zk路径是：...</text></switch></g><path d="M 2760 1200 L 2760 1253.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 1258.88 L 2756.5 1251.88 L 2760 1253.63 L 2763.5 1251.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2630" y="1140" width="260" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1170px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据动态配置重写了providerUrl之后，就会调用DubboProtocol或HttpProtocol去进行导出服务了，启动netty</div></div></div></foreignObject><text x="2760" y="1174" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据动态配置重写了providerUrl之后，就会调用DubboProtocol或HttpProtocol去进行导出服务了，启动netty</text></switch></g><rect x="2800" y="1120" width="90" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1130px; margin-left: 2845px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">doLocalExport</div></div></div></foreignObject><text x="2845" y="1134" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">doLocalExport</text></switch></g><rect x="2805" y="930" width="130" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 940px; margin-left: 2870px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">overrideUrlWithConfig</div></div></div></foreignObject><text x="2870" y="944" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">overrideUrlWithConfig</text></switch></g><path d="M 2760 1320 L 2760 1353.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 1358.88 L 2756.5 1351.88 L 2760 1353.63 L 2763.5 1351.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2700" y="1260" width="120" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1290px; margin-left: 2701px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">得到注册中心-ZookeeperRegistry</div></div></div></foreignObject><text x="2760" y="1294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">得到注册中心-ZookeeperRegistry</text></switch></g><path d="M 2760 1420 L 2760 1463.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 1468.88 L 2756.5 1461.88 L 2760 1463.63 L 2763.5 1461.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2635" y="1360" width="250" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1390px; margin-left: 2636px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">得到存入到注册中心去的providerUrl,会对服务提供者url中的参数进行简化，有些参数是多余的，没必要存储</div></div></div></foreignObject><text x="2760" y="1394" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">得到存入到注册中心去的providerUrl,会对服务提供者url中的参数进行简化，有些参数是多余的，没必要存储</text></switch></g><path d="M 2760 1530 L 2760 1563.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 1568.88 L 2756.5 1561.88 L 2760 1563.63 L 2763.5 1561.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2630" y="1470" width="260" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1500px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">将当前服务提供者Invoker，以及该服务对应的注册中心地址，以及简化后的服务url存入ProviderConsumerRegTable</div></div></div></foreignObject><text x="2760" y="1504" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将当前服务提供者Invoker，以及该服务对应的注册中心地址，以及简化后的服务url存入ProviderConsumerRegTable</text></switch></g><path d="M 2760 1630 L 2760 1673.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2760 1678.88 L 2756.5 1671.88 L 2760 1673.63 L 2763.5 1671.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2630" y="1570" width="260" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1600px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果需要注册到注册中心，把简化后的服务提供者url注册到registryUrl中去</div></div></div></foreignObject><text x="2760" y="1604" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果需要注册到注册中心，把简化后的服务提供者url注册到registryUrl中去</text></switch></g><rect x="2630" y="1680" width="260" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1710px; margin-left: 2631px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">针对老版本的动态配置，需要把overrideSubscribeListener绑定到overrideSubscribeUrl上去进行监听</div></div></div></foreignObject><text x="2760" y="1714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">针对老版本的动态配置，需要把overrideSubscribeListener绑定到overrideSubscribeU...</text></switch></g><path d="M 2950 1650 L 3530 1650 L 3560 1680 L 3560 1750 L 2950 1750 L 2950 1650 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3530 1650 L 3530 1680 L 3560 1680 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 3530 1650 L 3530 1680 L 3560 1680" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 1700px; margin-left: 2951px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>// 老版本监听的zk路径是：/dubbo/org.apache.dubbo.demo.DemoService/configurators/override://0.0.0.0/org.apache.dubbo.demo.DemoService?category=configurators&amp;compatible_config=true&amp;dynamic=false&amp;enabled=true&amp;timeout=6000</div><div>        // 监听的是路径的内容，不是节点的内容</div></div></div></div></foreignObject><text x="3255" y="1704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">// 老版本监听的zk路径是：/dubbo/org.apache.dubbo.demo.DemoService/configurators/override://0.0.0.0/org.apache.dubbo.demo....</text></switch></g><path d="M 3680 530 L 3680 578.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3680 583.88 L 3676.5 576.88 L 3680 578.63 L 3683.5 576.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3620" y="480" width="120" height="50" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 505px; margin-left: 3621px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DubboProtocol</div></div></div></foreignObject><text x="3680" y="509" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DubboProtocol</text></switch></g><path d="M 3680 645 L 3680 703.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3680 708.88 L 3676.5 701.88 L 3680 703.63 L 3683.5 701.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3580" y="585" width="200" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 615px; margin-left: 3581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">exporterMap.put(key, exporter);</div></div></div></foreignObject><text x="3680" y="619" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">exporterMap.put(key, exporter);</text></switch></g><path d="M 3820 565 L 3980 565 L 4010 595 L 4010 660 L 3820 660 L 3820 565 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3980 565 L 3980 595 L 4010 595 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 3980 565 L 3980 595 L 4010 595" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 613px; margin-left: 3821px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">构造一个Exporter进行服务导出<br />key：服务<br />端口（本质是为了区分协议） ，名字（默认是方法名），版本，组  联合作为key</div></div></div></foreignObject><text x="3915" y="616" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">构造一个Exporter进行服务导出...</text></switch></g><path d="M 3680 760 L 3680 803.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3680 808.88 L 3676.5 801.88 L 3680 803.63 L 3683.5 801.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3620" y="710" width="120" height="50" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 735px; margin-left: 3621px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">开启NettyServer</div></div></div></foreignObject><text x="3680" y="739" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">开启NettyServer</text></switch></g><rect x="3600" y="810" width="160" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 840px; margin-left: 3601px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">特殊的一些序列化机制，比如kryo提供了注册机制来注册类，提高序列化和反序列化的速度</div></div></div></foreignObject><text x="3680" y="844" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">特殊的一些序列化机制，比如kryo提供了注册机制来注册类，提高序列化和反序列化的速度</text></switch></g><rect x="4290" y="425" width="170" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 440px; margin-left: 4375px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">动态配置中心监听<br />AbstractConfiguratorListener</div></div></div></foreignObject><text x="4375" y="444" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">动态配置中心监听&#xa;AbstractConfiguratorListener</text></switch></g><path d="M 4230 540 L 4230 606.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4230 611.38 L 4226.5 604.38 L 4230 606.13 L 4233.5 604.38 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="4170" y="495" width="120" height="45" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 518px; margin-left: 4171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">initWith</div></div></div></foreignObject><text x="4230" y="521" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">initWith</text></switch></g><path d="M 4320 475 L 4520 475 L 4550 505 L 4550 575 L 4320 575 L 4320 475 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 4520 475 L 4520 505 L 4550 505 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 4520 475 L 4520 505 L 4550 505" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 525px; margin-left: 4321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">在构造ProviderConfigurationListener和ServiceConfigurationListener都会调用到这个方法<br />完成Listener自身订阅到对应的应用和服务<br />订阅关系绑定完了之后，主动从动态配置中心获取一下对应的配置数据生成configurators，后面需要重写providerUrl</div></div></div></foreignObject><text x="4435" y="529" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在构造ProviderConfigurationListener和ServiceCo...</text></switch></g><path d="M 4230 672.5 L 4230 708.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4230 713.88 L 4226.5 706.88 L 4230 708.63 L 4233.5 706.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="4170" y="612.5" width="120" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 643px; margin-left: 4171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">添加Listener,进行了订阅</div></div></div></foreignObject><text x="4230" y="646" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">添加Listener,进行了订阅</text></switch></g><path d="M 4230 775 L 4230 823.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4230 828.88 L 4226.5 821.88 L 4230 823.63 L 4233.5 821.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="4145" y="715" width="170" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 745px; margin-left: 4146px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">从配置中心ConfigCenter获取属于当前应用的动态配置数据，从zk中拿到原始数据(主动从配置中心获取数据)</div></div></div></foreignObject><text x="4230" y="749" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">从配置中心ConfigCenter获取属于当前应用的动态配置数据，从zk中拿到原始数据(主动从配置中心获取数据)</text></switch></g><rect x="4170" y="830" width="120" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 860px; margin-left: 4171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果存在应用配置信息则根据配置信息生成Configurator</div></div></div></foreignObject><text x="4230" y="864" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果存在应用配置信息则根据配置信息生成Configurator</text></switch></g><path d="M 4730 525 L 4730 583.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4730 588.88 L 4726.5 581.88 L 4730 583.63 L 4733.5 581.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="4670" y="465" width="120" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 495px; margin-left: 4671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">处理配置信息变化事件<br />process</div></div></div></foreignObject><text x="4730" y="499" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">处理配置信息变化事件&#xa;process</text></switch></g><path d="M 4840 455 L 5000 455 L 5030 485 L 5030 555 L 4840 555 L 4840 455 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 5000 455 L 5000 485 L 5030 485 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 5000 455 L 5000 485 L 5030 485" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 505px; margin-left: 4841px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">notifyOverrides：<br />ConsumerConfigurationListener<br />ReferenceConfigurationListener<br />ProviderConfigurationListener<br />ServiceConfigurationListener</div></div></div></foreignObject><text x="4935" y="509" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">notifyOverrides：...</text></switch></g><path d="M 4730 650 L 4730 683.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4730 688.88 L 4726.5 681.88 L 4730 683.63 L 4733.5 681.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="4605" y="590" width="250" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 620px; margin-left: 4606px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">originUrl：获取当前服务的原始服务提供者url</div></div></div></foreignObject><text x="4730" y="624" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">originUrl：获取当前服务的原始服务提供者url</text></switch></g><path d="M 4730 730 L 4730 750 L 4730 740 L 4730 753.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4730 758.88 L 4726.5 751.88 L 4730 753.63 L 4733.5 751.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="4610" y="690" width="240" height="40" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 710px; margin-left: 4611px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">currentUrl：当前服务被导出的url</div></div></div></foreignObject><text x="4730" y="714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">currentUrl：当前服务被导出的url</text></switch></g><path d="M 4730 820 L 4730 853.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4730 858.88 L 4726.5 851.88 L 4730 853.63 L 4733.5 851.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="4610" y="760" width="240" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 790px; margin-left: 4611px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据configurators修改url，configurators是全量的，并不是某个新增的或删除的，所以是基于原始的url进行修改，并不是基于currentUrl</div></div></div></foreignObject><text x="4730" y="794" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据configurators修改url，configurators是全量的，并不是某个新增的或删除的，所以是基于原始的url进行修改，并不是基于currentU...</text></switch></g><rect x="4670" y="860" width="120" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 890px; margin-left: 4671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">修改过的url如果和目前的url不相同，则重新按newUrl导出</div></div></div></foreignObject><text x="4730" y="894" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">修改过的url如果和目前的url不相同，则重新按newUrl导出</text></switch></g><path d="M 4840 860 L 4970 860 L 5000 890 L 5000 920 L 4840 920 L 4840 860 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 4970 860 L 4970 890 L 5000 890 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 4970 860 L 4970 890 L 5000 890" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 890px; margin-left: 4841px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">!currentUrl.equals(newUrl)</div></div></div></foreignObject><text x="4920" y="894" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">!currentUrl.equals(newUrl)</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>